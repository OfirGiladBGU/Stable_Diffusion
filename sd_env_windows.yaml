name: sd
channels:
  - defaults
  - conda-forge
  - pytorch
  - nvidia
dependencies:
  - python=3.10
  - pip
  # PyTorch will be installed via pip wheels for CUDA 12.9 (cu129).
  # The wheels use the +cu129 suffix (example: torch==2.8.0+cu129).
  # We keep pytorch-cuda pinned to a nearby conda package for CUDA libs if desired.
  - pytorch-cuda=12.4
  - numpy
  - pandas
  - pillow
  - jupyter
  - pip:
    - accelerate==1.10.1
    - braceexpand==0.1.7
    - charset-normalizer==3.4.3
    - contourpy==1.3.2
    - controlnet-aux==0.0.10
    - cycler==0.12.1
    - einops==0.8.1
    - filelock==3.13.1
    - fire==0.7.1
    - fonttools==4.59.2
    - fsspec==2024.6.1
    - hf-xet==1.1.9
    - idna==3.10
    - imageio==2.37.0
    - jinja2==3.1.4
    - kiwisolver==1.4.9
    - lazy-loader==0.4
    - markupsafe==2.1.5
    - matplotlib==3.10.6
    - mpmath==1.3.0
    - networkx==3.3
  # NVIDIA conda packages should be installed via conda (pytorch/nvidia channels) if needed.
    - opencv-python-headless==4.12.0.88
    - protobuf==6.32.0
    - pyparsing==3.2.3
    - pyyaml==6.0.2
    - regex==2025.9.1
    - requests==2.32.5
    - safetensors==0.6.2
    - scikit-image==0.25.2
    - scipy==1.15.3
    - sentencepiece==0.2.1
    - setuptools==70.2.0
    - sympy==1.13.3
    - termcolor==3.1.0
    - tifffile==2025.5.10
    - timm==1.0.19
    - tokenizers==0.22.0
    - tqdm==4.67.1
  # triton (3.3.1) removed: no official Windows wheel for this Python; install later if needed via pip/conda-compatible build
    - typing-extensions==4.12.2
    - urllib3==2.5.0
    - webdataset==1.0.2
  - xformers==0.0.31.post1
  # The following torch packages are installed from the PyTorch cu129 index:
  #   pip install --index-url https://download.pytorch.org/whl/cu129 torch torchvision torchaudio
  - torch==2.8.0+cu129
  - torchvision==0.23.0+cu129
  - torchaudio==2.8.0+cu129
    - diffusers==0.35.1
    - transformers==4.56.0
    - datasets==2.14.4
    - huggingface_hub==0.34.4

# NOTE:
# - This YAML intentionally omits pinned conda build strings and Linux-only packages present in the original `sd_env.yaml`.
# - It also omits `torch`/`torchvision` so you can install the appropriate PyTorch build for your Windows GPU/CPU.
# Recommended next steps (Windows PowerShell):
# 1) Create the environment:
#    conda env create -f sd_env_windows.yaml
# 2) Activate it:
#    conda activate sd
# 3) Install PyTorch (choose one):
#    - For CUDA 11.8 (NVIDIA GPU):
#      conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia
#    - For CPU-only:
#      conda install pytorch torchvision torchaudio cpuonly -c pytorch
# 4) Optionally install xformers and other CUDA-accelerated packages via pip if needed.
